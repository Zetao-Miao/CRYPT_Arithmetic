## Area-Efficient LUT-Based Multipliers for AMD Versal FPGAs (Artifact)

This repository contains the artifact accompanying an anonymous
submission to ARITH 2026 titled:

**"Area-Efficient LUT-Based Multipliers for AMD Versal FPGAs."**

The project provides an automated RTL generator for:

-   Compressor trees using generalized parallel counters (GPCs)
-   Radix-4 Booth tree multipliers implemented on LUTs for AMD Versal
    devices

The generator produces synthesizable SystemVerilog together with
auxiliary files for evaluation and reproduction of experimental results
reported in the paper.

------------------------------------------------------------------------

## Project Overview

This artifact implements the methods described in the paper, including:

-   Versal-aware compressor-tree synthesis
-   Architecture-aware heuristic scheduling
-   LUT-based radix-4 Booth multiplier generation
-   Automatic pipeline insertion
-   Bit-heap visualization support

------------------------------------------------------------------------

## Repository Structure

    .
    ├── versalArith.py        # Main entry point (CLI)
    ├── heuristic.py          # Compressor tree synthesis heuristic
    ├── Counter_v.py          # GPC and counter construction
    ├── LUT_init.py           # LUT initialization utilities
    ├── RTL_gen.py            # RTL generation backend
    ├── BH.py                 # Bit-heap representation
    ├── bitheap.txt           # Example bit-heap input
    ├── rtl/                  # Supporting SystemVerilog modules (add to Vivado design sources)
    └── eval_examples/        # Generated evaluation examples from the paper

------------------------------------------------------------------------

## RTL Folder (rtl)

The `rtl` directory contains supporting SystemVerilog modules required
by the generated designs.

When using Vivado:

-   Add all files inside the `rtl` folder to **Design Sources**.
-   These modules implement reusable building blocks referenced by the
    generated RTL.

------------------------------------------------------------------------

## Evaluation Examples (eval_examples)

The `eval_examples` directory contains example designs generated by the
RTL generator and used as evaluation cases in the paper.

Each example may include:

-   Generated SystemVerilog RTL (`.sv`)
-   Testbench files
-   Random test vectors
-   XDC constraint files\
    ⚠️ The XDC constraints should be set as **implementation-valid
    only**
-   Visualization images illustrating the bit-heap compression process
-   Supporting files required for reproducing reported experiments

These files serve as ready-to-run references demonstrating expected
generator outputs.

------------------------------------------------------------------------

## Bit Heap Description File (bitheap.txt)

The file `bitheap.txt` specifies the shape of the bit heap used for
compressor tree generation.

-   Each line represents the number of bits in one column.
-   The first line corresponds to the least significant bit (LSB, rank
    0).
-   The last line corresponds to the most significant bit (MSB).

This format allows arbitrary bit-heap configurations to reproduce
compressor-tree experiments described in the paper.

Note:

-   Bit heaps should not be excessively small (e.g., a single column
    with only a few bits), since such cases can usually be directly
    optimized using LUT mappings without requiring the compressor-tree
    synthesis flow.

------------------------------------------------------------------------

## Requirements

-   Python 3.x
-   Vivado (tested with recent versions supporting Versal devices)
-   matplotlib (for visualization generation)

No additional external dependencies are required.

------------------------------------------------------------------------

## Generator Usage (Command Line Interface)

The generator is invoked via:

    python3 versalArith.py [options]

Two generation modes corresponding to the paper contributions are
supported.

------------------------------------------------------------------------

### 1. Compressor Tree Generation

Example:

    python versalArith.py \
      -operator cmp \
      -txt_file_name bitheap.txt \
      -sv_file_name bitheap_cmp \
      -pipeline_stages 1 \
      -visualization True \
      -gen_testbench True

Main arguments:

  Argument             Description
  -------------------- -----------------------------------------------
  `-txt_file_name`     Bit heap description file
  `-sv_file_name`      Output SystemVerilog module name
  `-pipeline_stages`   Number of pipeline stages (0 = combinational)
  `-visualization`     Generate PNG visualization of compression
  `-gen_testbench`     Generate testbench and vectors

------------------------------------------------------------------------

### 2. Radix-4 Booth Tree Multiplier Generation

Example:

    python versalArith.py \
      -operator bmult \
      -width_a 16 \
      -width_b 16 \
      -pipeline_stages 2 \
      -gen_testbench True

Main arguments:

  Argument             Description
  -------------------- --------------------------------
  `-width_a`           Bit-width of input operand A
  `-width_b`           Bit-width of input operand B
  `-pipeline_stages`   Number of pipeline stages
  `-gen_testbench`     Generate testbench and vectors

*Note:* The current generator does not support multiplier sizes smaller
than 6×6. Such small multipliers are typically straightforward to
optimize manually and are therefore outside the intended scope of this
tool.

------------------------------------------------------------------------

## Testbench and Test Vector Usage

If you plan to use the generated testbench (`tb`) together with the
generated test vectors:

-   Ensure that both are placed within the expected file hierarchy,
    **or**
-   Modify the file-reading section inside the testbench to match your
    directory structure.

------------------------------------------------------------------------

## Possible Tool Problems

If synthesis appears to stall or hang during the synthesis flow,
disabling Vivado automatic global retiming in synthesis settings may
resolve the issue.

------------------------------------------------------------------------

## Visualization Output

When visualization is enabled, the generator produces PNG images
illustrating:

-   Bit-heap evolution
-   Compression stages
